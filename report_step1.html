<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>×“×™×•×•×— ×—×“×© â€“ ×©×œ×‘ 1</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="mobile.css">

    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 16px;
            background-color: #f7f7f7;
        }
        .card {
            background:#fff;
            padding:20px;
            border-radius:10px;
            box-shadow:0 0 5px rgba(0,0,0,0.2);
            margin-bottom:20px;
        }
        select, input[type="text"], textarea {
            width:100%;
            padding:8px;
            margin-top:6px;
            margin-bottom:12px;
        }
        button {
            padding:10px 16px;
            cursor:pointer;
        }
        .btn-primary {
            background:#007bff;
            color:white;
            border:none;
            border-radius:4px;
        }
        .type-buttons {
            margin-top:8px;
        }
        .type-button {
            display:inline-block;
            padding:8px 12px;
            margin:4px 2px;
            border:1px solid #ccc;
            border-radius:4px;
            cursor:pointer;
            user-select:none;
        }
        .type-button.selected {
            border-color:#007bff;
            font-weight:bold;
        }
        .type-button input {
            display:none;
        }
    </style>
</head>
<body>
<div class="container">
<header class="card">
    <a href="index.html">×“×£ ×”×‘×™×ª</a> |
    <a href="all_reports.html">×›×œ ×”×ª×§×œ×•×ª</a>
</header>

<div class="card">
    <h2>×“×™×•×•×— ×—×“×© â€“ ×©×œ×‘ 1 ××ª×•×š 3</h2>
    <p>×‘×—×¨ ××ª ×”××–×•×¨ ×‘×“×™×¨×” ×•×¡×•×’ ×”×‘×¢×™×”.</p>

    <form id="step1-form">
        <label for="room">××–×•×¨ ×‘×“×™×¨×”</label>
        <select id="room" name="room" required>
            <option value="">×‘×—×¨ ××–×•×¨...</option>
            <option value="×¡×œ×•×Ÿ">×¡×œ×•×Ÿ</option>
            <option value="××˜×‘×—">××˜×‘×—</option>
            <option value="×—×“×¨ ×©×™× ×” ×”×•×¨×™×">×—×“×¨ ×©×™× ×” ×”×•×¨×™×</option>
            <option value="×—×“×¨ ×™×œ×“×™× 1">×—×“×¨ ×™×œ×“×™× 1</option>
            <option value="×—×“×¨ ×™×œ×“×™× 2">×—×“×¨ ×™×œ×“×™× 2</option>
            <option value="××§×œ×—×ª">××§×œ×—×ª</option>
            <option value="×©×™×¨×•×ª×™×">×©×™×¨×•×ª×™×</option>
            <option value="××¨×¤×¡×ª">××¨×¤×¡×ª</option>
        </select>

        <label>×¡×•×’ ×”×‘×¢×™×”</label>
        <div class="type-buttons">
            <label class="type-button">
                <input type="radio" name="issue_type" value="broken" required>
                ğŸ”§ ××©×”×• ×”×ª×§×œ×§×œ
            </label>
            <label class="type-button">
                <input type="radio" name="issue_type" value="missing">
                ğŸ“¦ ××©×”×• ×—×¡×¨
            </label>
            <label class="type-button">
                <input type="radio" name="issue_type" value="other">
                â“ ××©×”×• ××—×¨
            </label>
        </div>

        <button class="btn-primary" type="submit">×”××©×š ×œ×©×œ×‘ 2</button>
    </form>
</div>

<script>
// -------------------------
// ×¢×™×¦×•×‘ ×‘×—×™×¨×ª ×›×¤×ª×•×¨
// -------------------------
document.querySelectorAll(".type-button").forEach(btn => {
    btn.addEventListener("click", () => {
        const name = btn.querySelector("input").name;
        document.querySelectorAll(`input[name="${name}"]`).forEach(i => 
            i.parentElement.classList.remove("selected")
        );
        btn.classList.add("selected");
        btn.querySelector("input").checked = true;
    });
});

// -------------------------
// ×©××™×¨×ª ×©×œ×‘ 1 ×•×”××©×š ×œ×©×œ×‘ ×”×‘×
// -------------------------
const form = document.getElementById("step1-form");

form.addEventListener("submit", function(e) {
    e.preventDefault();

    const params = new URLSearchParams(window.location.search);
    const apartmentId = params.get("apartment_id");

    if (!apartmentId) {
        alert("×©×’×™××”: ×—×¡×¨ apartment_id ×‘Ö¾URL");
        return;
    }

    const room = document.getElementById("room").value;
    const issueType = form.querySelector("input[name='issue_type']:checked")?.value;

    if (!room || !issueType) {
        alert("× × ×œ×‘×—×•×¨ ××–×•×¨ ×•×¡×•×’ ×‘×¢×™×”");
        return;
    }

    // â— ×©×•××¨×™× ××™×“×¢ ×–×× ×™ ×œ××¢×‘×¨ ×‘×™×Ÿ ×©×œ×‘×™×
    sessionStorage.setItem("report_room", room);
    sessionStorage.setItem("report_issue_type", issueType);

    // â— ××¢×‘×¨ ×œ×©×œ×‘ 2
    window.location.href = `report_step2.html?apartment_id=${encodeURIComponent(apartmentId)}`;
});
</script>
</div>
</body>
</html>

